<head>
	<style type="text/css">  
		table.hovertable {  
			font-family: verdana,arial,sans-serif;  
			font-size:11px;  
			color:#333333;  
			border-width: 1px;  
			border-color: #999999;  
			border-collapse: collapse;  
		}  
		table.hovertable th {  
			background-color:#c3dde0;  
			border-width: 1px;  
			padding: 8px;  
			border-style: solid;  
			border-color: #a9c6c9;  
		}  
		table.hovertable tr {  
			background-color:#d4e3e5;  
		}  
		table.hovertable td {  
			border-width: 1px;  
			padding: 8px;  
			border-style: solid;  
			border-color: #a9c6c9;  
		}  
	</style>


</head>
<body>
	<div class="container">
		<div class="row">
		  <div class="col-12-sm">
			  <div id="main" style="position:absolute;left:0px;top:30px;width: 1600px;height:200px;">
					<h1><b>Message Classify</b></h1>

					<hr size="1" color="#999999">
					
					<!-- 1、表单 -->
					<div id="form" style="position:absolute;left:30px;top:100px;width: 500px;height:200px;">
						<form name="MessageClassifyForm" method="get">
							<h3>Select Data Set</h3>
							<li>
								<input type="radio" name="index" value="iris-2">iris-2</a>
							</li>
							<li ng-repeat="indexName in ctrl.indices">
								<input type="radio" name="index" value={{indexName}}>{{ indexName }}</a>
							</li>
					
						</form><br>
	
						<button id = "dataViewButton">View</button>
						<button id = "submitButton">Run</button><br>
					</div>
					
					<!-- 2、图表显示 -->
					<div style="position:absolute;left:300px;top:100px; width:1000px; height:800px;">
						<h3>Data View</h3>
						<div id="table" name="table" style="position:absolute;left:0px;top:80px; width:1000px; height:700px; overflow-y:auto; overflow-x:auto;">
							<table class="hovertable" border="1" width="2000">  

								<tr> <th>id</th><th>正确分类</th><th>原有分类</th><th>信息标题</th><th>信息内容</th><th>事发时间</th><th>信息类型</th></tr>
	
								<tr onmouseover="this.style.backgroundColor='#ffff66';" onmouseout="this.style.backgroundColor='#d4e3e5';">
								<td>1</td> <td name="classify" id="c1">-</td> <td>环境保护管理，社会生活噪声、振动，商业活动噪声</td> <td>灌口黄庄凤山庙路685号义乌小商品店使用高音喇叭噪声扰民严重</td> <td>灌口黄庄凤山庙路685号义乌小商品店使用高音喇叭噪声扰民严重。</td> <td>2017-07-02T20:25:00Z</td> <td>B22Q01</td> 
								
								<tr onmouseover="this.style.backgroundColor='#ffff66';" onmouseout="this.style.backgroundColor='#d4e3e5';">
								<td>2</td> <td name="classify" id="c2">-</td> <td>环境保护管理，施工噪声、粉尘污染，施工噪声、振动污染</td> <td>杏林华林花园三期工地施工，噪声扰民。</td> <td>杏林华林花园三期工地施工，噪声扰民。</td> <td></td> <td>B22Q01</td> 
								
								<tr onmouseover="this.style.backgroundColor='#ffff66';" onmouseout="this.style.backgroundColor='#d4e3e5';">
								<td>3</td> <td name="classify" id="c3">-</td> <td>质量--其他</td> <td></td> <td>投诉方于2017年06月30日向佰鹰二手车行(地址:厦门市思明区盘龙路与金尚路交叉路口)购买一辆“广本”汽车，价格:163000.00元，仪表盘显示的公里数为9000多公里，投诉方7月18日送去4S店检测，得知该车已行驶了2万多公里，现投诉方要求商家退车。</td> <td>2017-07-18T00:00:00Z</td> <td>B24Q03</td> 
								
								<tr onmouseover="this.style.backgroundColor='#ffff66';" onmouseout="this.style.backgroundColor='#d4e3e5';">
								<td>4</td> <td name="classify" id="c4">-</td> <td>政法，交通安全，交通安全管理</td> <td>有关道路开口太多的问题</td> <td>湖里区吕岭路往蔡塘广场的道路开口太多了，有人会横穿马路，导致交通拥堵。要求有关部门调查处理。</td> <td>2017-05-27T10:56:53Z</td> <td>B30000</td> 
								
								<tr onmouseover="this.style.backgroundColor='#ffff66';" onmouseout="this.style.backgroundColor='#d4e3e5';">
								<td>5</td> <td name="classify" id="c5">-</td> <td>卫生计生，医患纠纷，医疗事故</td> <td>有关鉴定费用的问题</td> <td>1、2016年5月19日开始多次来电反映:其住在同安区新民镇梧侣大店里171号。3月31日下午其孩子张进(九岁)感冒，其妻子带孩子到其家附近200米左右的平价诊所就诊，诊所的医生(吴焱)无证行医，导致其孩子死亡。其向110报警，新民派出所受理案件，并对其小孩进行死亡鉴定。5月16日鉴定结果出来，结果里写明“此事因小孩患质性肺炎和肺出血以及梗死灶继发化脓性症加重其心功能障碍，导致急性心力衰竭而死亡”。其认为鉴定书鉴定结果不公正，且这间平价诊所无证行医，为何卫生部门一直未取缔?要求相关部门调查处理。2、7月25日再次来电反映:其向福州的鼎力鉴定机构申请第二次鉴定，鼎力鉴定机构要求其提供切片标片，可厦门的正泰司法鉴定中心迟迟不提供，一周推一周，上周三让其今天(7月25日)去拿，可今天去拿，又被告知工作人员休假了。对此表示不满，要求相关部门尽快帮助提供其所需要的材料，以便其能尽快做第二次鉴定。3、2017年5月23日再次来电反映:2016年6月份，以同安公安分局的名义在福州做死因鉴定，却是其自己支付的费用(一万多元)。想了解公安部门能否支付鉴定的费用给其。要求尽快给予答复。4、7月3日再次来电反映:市公安局已认定诊所是非法行医，因此认为费用不应该由其承担。要求有关部门尽快直接给予答复。</td> <td>2017-07-03T13:39:30Z</td> <td>B24J03</td> 
								
								<tr onmouseover="this.style.backgroundColor='#ffff66';" onmouseout="this.style.backgroundColor='#d4e3e5';">
								<td>6</td> <td name="classify" id="c6">-</td> <td>环境保护管理，施工噪声、粉尘污染，粉尘污染</td> <td>灌口双桥旁工地粉尘污染严重，没有喷水。</td> <td>灌口双桥旁工地粉尘污染严重，没有喷水。</td> <td>2017-09-14T19:03:00Z</td> <td>B22Q04</td> 
								
								<tr onmouseover="this.style.backgroundColor='#ffff66';" onmouseout="this.style.backgroundColor='#d4e3e5';">
								<td>7</td> <td name="classify" id="c7">-</td> <td>劳动社保，工资福利，拖欠工资</td> <td>查询反映件的处理情况</td> <td>查询反映件的处理情况(8月16日来电反映关于绿化工人被拖欠工资的问题)。</td> <td>2017-08-17T17:31:50Z</td> <td>B24J04</td> 
								
								<tr onmouseover="this.style.backgroundColor='#ffff66';" onmouseout="this.style.backgroundColor='#d4e3e5';">
								<td>8</td> <td name="classify" id="c8">-</td> <td>城市管理</td> <td>莲花二村菡青里18号的住户</td> <td>我是莲花二村菡青里18号的住户，我们楼下有家大森林餐馆，排污在下水道造成天天堵，还有油烟污染请相关部门去实地查堪一下，现在还存在煤气罐危险如果真的像文屏一样爆炸了，那是谁的责任呢?</td> <td>2017-09-28T22:51:33Z</td> <td>B24N00</td> 
								
								<tr onmouseover="this.style.backgroundColor='#ffff66';" onmouseout="this.style.backgroundColor='#d4e3e5';">
								<td>9</td> <td name="classify" id="c9">-</td> <td>环境保护管理，油烟排放，未按规定设置专用通道</td> <td>集美区乐安南里87号旁边渔火之乡长期油烟扰民严重，并且乱倒垃</td> <td>集美区乐安南里87号旁边渔火之乡长期油烟扰民严重，并且乱倒垃圾。</td> <td>2017-05-25T16:14:00Z</td> <td>B24N00</td> 
								
								<tr onmouseover="this.style.backgroundColor='#ffff66';" onmouseout="this.style.backgroundColor='#d4e3e5';">
								<td>10</td> <td name="classify" id="c10">-</td> <td>治安类，涉稳</td> <td>小贩占用路道</td> <td>小贩在后尾路口不能摆摊，全部拉到上面的村路口摆，影响交通。</td> <td>2017-09-19T09:36:34Z</td> <td>B24Y00</td> 
							</table>
						</div>
						
					</div>
			  </div>
		  </div>
		</div>
	  </div>
</body>

<script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"type="text/javascript"></script>
<script type="text/javascript">

//   document.getElementsByName("classify").style.visibility="hidden";
//   document.getElementById("c1").style.display = 'none';
// document.getElementById("p1").innerHTML = "------";
	
	
	$(document).ready(function(){
		document.getElementById("table").style.display = 'none';
		
		$("#dataViewButton").click(function(){
			console.log("dataViewButtonButton click");
			if(generateURL()){
				document.getElementById("table").style.display = '';
			}
		});
		
		// 信息分类
		$("#submitButton").click(function(){
			console.log("submitButton click");
			if(generateURL()){
				document.getElementById("table").style.display = '';
				redirectPrefix = 'http://127.0.0.1:8080/dataVisualize.html';
				redirect = redirectPrefix + '?ref=' + encodeURIComponent(url);
				console.log("请求数据 url = "+redirect);
				changeTable();
			}
		});
	});

	// 填表
	function changeTable(){
		arr = ["-","噪音污染（含生活与建筑）","噪音污染（含生活与建筑）","涉法涉诉类纠纷","道路拥堵","非法行医","粉尘污染","工资纠纷","油烟污染","油烟污染","违规占道"];
		time=1000;
		setTimeout('document.getElementById("c1").innerHTML="噪音污染（含生活与建筑）";',time);
		time=time+500;
		setTimeout('document.getElementById("c2").innerHTML="噪音污染（含生活与建筑）";',time);
		time=time+500;
		setTimeout('document.getElementById("c3").innerHTML="涉法涉诉类纠纷";',time);
		time=time+500;
		setTimeout('document.getElementById("c4").innerHTML="道路拥堵";',time);
		time=time+500;
		setTimeout('document.getElementById("c5").innerHTML="非法行医";',time);
		time=time+500;
		setTimeout('document.getElementById("c6").innerHTML="粉尘污染";',time);
		time=time+500;
		setTimeout('document.getElementById("c7").innerHTML="工资纠纷";',time);
		time=time+500;
		setTimeout('document.getElementById("c8").innerHTML="油烟污染";',time);
		time=time+500;
		setTimeout('document.getElementById("c9").innerHTML="油烟污染";',time);
		time=time+500;
		setTimeout('document.getElementById("c10").innerHTML="违规占道";',time);
	}

	function generateURL(){
		var s = new Array();
		s[0] = "MessageClassifyForm";
		s[1] = "index";

		url = "http://127.0.0.1:9200/_taste/parameter?";
		var value = new Array();
		var indexName = document.forms[s[0]][s[1]].value;
		if(indexName!="iris-2"){
		// if(true){
			alert("We can not process the data set "+indexName+" !");
			return false;
		}
		for(var i=1; i<s.length; i++){
			value[i] = document.forms[s[0]][s[i]].value;
			if(value[i]==""){
				alert("Please fill the "+s[i]+" item !");
				return false;
			}
			url+=s[i]+"="+value[i]+"&";
		}
		url = url.substring(0, url.length-1);
		return true;
	}

</script>


    